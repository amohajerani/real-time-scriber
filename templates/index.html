<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Deepgram Test</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link rel="stylesheet" href="../static/style.css" />
    <script
      src="https://cdn.socket.io/4.5.3/socket.io.min.js"
      crossorigin="anonymous"
    ></script>
  </head>
  <body class="">
    <div class="header">
      <h1>Clinical Documentation Assistant</h1>
      <p class="subtitle">AI-Powered Medical Transcription & Documentation</p>
    </div>

    <div class="main-container">
      <div class="recording-section">
        <div class="button-container">
          <input type="checkbox" id="record" class="mic-checkbox" />
          <label for="record" class="mic-button">
            <div class="mic">
              <div class="mic-button-loader"></div>
              <div class="mic-base"></div>
            </div>
            <div class="button-message">
              <span>&nbsp;</span>
              <span>RECORD</span>
            </div>
          </label>
        </div>
        <div class="captions" id="captions" contenteditable="true">
          <span>Transcript will appear here after recording</span>
        </div>
        <button id="saveTranscriptBtn" class="action-btn">
          <i class="fas fa-save"></i> Save Transcript
        </button>
      </div>

      <div class="summary-container">
        <div class="prompt-selector">
          <h2>Template Selection</h2>
          <div class="selector-controls">
            <select id="promptSelect">
              <!-- Options will be populated dynamically -->
            </select>
            <button id="regenerateBtn" class="action-btn">
              <i class="fas fa-sync-alt"></i> Regenerate Note
            </button>
            <button id="editPromptBtn" class="action-btn">
              <i class="fas fa-edit"></i> Edit Template
            </button>
          </div>
        </div>

        <div class="prompt-controls">
          <button id="newPromptBtn" class="action-btn">
            <i class="fas fa-plus"></i> New Template
          </button>
        </div>

        <div class="documentation-section">
          <h2>Template Format</h2>
          <div class="prompt" id="prompt">
            <span>Loading template...</span>
          </div>

          <div class="prompt-editor" id="promptEditor" style="display: none">
            <textarea id="promptText"></textarea>
            <div class="editor-buttons">
              <button id="savePromptBtn" class="action-btn">Save</button>
              <button id="cancelEditBtn" class="action-btn secondary">
                Cancel
              </button>
            </div>
          </div>

          <h2>
            Clinical Note
            <button
              id="copyNoteBtn"
              class="action-btn secondary tooltip"
              title="Copy to clipboard"
            >
              <i class="fas fa-copy"></i> Copy Note
            </button>
          </h2>
          <div class="summary" id="summary" contenteditable="true">
            <span
              >Generated clinical note will appear here after recording</span
            >
          </div>
          <button id="saveSummaryBtn" class="action-btn">
            <i class="fas fa-save"></i> Save Note
          </button>
        </div>
      </div>
    </div>

    <div id="newPromptDialog" class="prompt-dialog" style="display: none">
      <h3>Create New Prompt</h3>
      <input type="text" id="newPromptName" placeholder="Prompt Name" />
      <textarea id="newPromptContent" placeholder="Prompt Content"></textarea>
      <div class="dialog-buttons">
        <button id="saveNewPromptBtn">Save</button>
        <button id="cancelNewPromptBtn">Cancel</button>
      </div>
    </div>
    <script src="../static/script.js"></script>
    <script src="../static/prompt-handler.js"></script>
  </body>
</html>
